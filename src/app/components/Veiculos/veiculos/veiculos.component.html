<div class="vehicles-container">
  <!-- Header -->
  <div class="header">
    <div class="header-title">
      <mat-icon class="title-icon">directions_car</mat-icon>
      <h2>Gerenciamento de Veículos</h2>
    </div>
    <button class="btn-add" (click)="openModal()">
      <mat-icon>add_circle</mat-icon>
      Novo Veículo
    </button>
  </div>

  <!-- Tabela de Veículos -->
  <div class="table-container" *ngIf="lista && lista.length > 0; else empty">
    <table class="vehicles-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Modelo</th>
          <th>Matrícula</th>
          <th>Ano</th>
          <th>Capacidade Tanque</th>
          <th>Marca</th>
          <th>Kilometragem</th>
          <th class="actions-header">Ações</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let v of lista" class="table-row">
          <td class="id-cell">{{ v.id }}</td>
          <td class="modelo-cell">{{ v.modelo }}</td>
          <td class="placa-cell">
            <span class="placa-badge">{{ v.matricula }}</span>
          </td>
          <td class="ano-cell">{{ v.anoFabricacao }}</td>
          <td class="modelo-cell">{{ v.capacidadeTanque }} L</td>
          <td class="marca-cell">{{ v.marca?.nome }}</td>
          <td class="modelo-cell">{{ v.kilometragemAtual }} km</td>
          <td class="actions-cell">
            <button
              type="button"
              class="btn btn-primary btn-rounded"
              mdbRipple
              (click)="openModal(v)">
              Editar
            </button>
            <button
              type="button"
              class="btn btn-danger btn-rounded"
              mdbRipple
              (click)="deleteVeiculo(v)">
              Eliminar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Estado vazio -->
  <ng-template #empty>
    <div class="empty-state">
      <mat-icon class="empty-icon">directions_car</mat-icon>
      <h3>Nenhum veículo cadastrado</h3>
      <p>Comece adicionando seu primeiro veículo à frota</p>
      <button class="btn-add-empty" (click)="openModal()">
        <mat-icon>add_circle</mat-icon>
        Adicionar Primeiro Veículo
      </button>
    </div>
  </ng-template>
</div>

<!-- Modal -->
<ng-template #modalVeiculoDetalhes>
  <div class="modal-header">
    <h5 class="modal-title">{{ isEdit ? 'Editar Veículo' : 'Cadastrar Veículo' }}</h5>
    <button
      type="button"
      class="btn-close"
      aria-label="Close"
      (click)="closeModal()">
    </button>
  </div>
  <div class="modal-body">
    <!-- Componente de detalhes do veículo -->
    <app-veiculosdetalis
      [veiculoParaEditar]="selectedVeiculo"
      (veiculoSalvo)="closeModal()"
      (fecharModal)="closeModal()">
    </app-veiculosdetalis>
  </div>
</ng-template>
