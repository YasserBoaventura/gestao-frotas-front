<div class="container">
  <div class="row justify-content-center align-items-center vh-100">
    <div class="col-md-6 col-lg-4">
      <div class="card shadow-lg border-0 rounded-4">
        <div class="card-body p-4">
          <div class="text-center mb-4">
            <img src="https://cdn-icons-png.flaticon.com/512/684/684908.png" alt="Rota Icon" width="70">
            <h3 class="mt-3 mb-1">Criar Conta</h3>
            <p class="text-muted">Preencha os dados para se registrar</p>
          </div>

          <!-- Form com validações -->
          <form (ngSubmit)="register()" #registerForm="ngForm">

            <mdb-form-control class="mb-3">
              <input
                mdbInput
                type="text"
                id="usuario"
                class="form-control"
                [(ngModel)]="registerData.username"
                name="username"
                required
                minlength="3"
                placeholder="Digite seu usuário"
                #username="ngModel"
              />
              <label mdbLabel class="form-label" for="usuario">Usuário</label>
              <div class="text-danger small" *ngIf="username.invalid && username.touched">
                <div *ngIf="username.errors?.['required']">Usuário é obrigatório</div>
                <div *ngIf="username.errors?.['minlength']">Mínimo 3 caracteres</div>
              </div>
            </mdb-form-control>

            <mdb-form-control class="mb-3">
              <input
                mdbInput
                type="email"
                id="email"
                class="form-control"
                [(ngModel)]="registerData.email"
                name="email"
                required
                email
                placeholder="Digite seu email"
                #email="ngModel"
              />
              <label mdbLabel class="form-label" for="email">Email</label>
              <div class="text-danger small" *ngIf="email.invalid && email.touched">
                <div *ngIf="email.errors?.['required']">Email é obrigatório</div>
                <div *ngIf="email.errors?.['email']">Email inválido</div>
              </div>
            </mdb-form-control>

            <mdb-form-control class="mb-3">
              <input
                mdbInput
                type="password"
                id="senha"
                class="form-control"
                [(ngModel)]="registerData.password"
                name="password"
                required
                minlength="6"
                placeholder="Digite sua senha"
                #password="ngModel"
              />
              <label mdbLabel class="form-label" for="senha">Senha</label>
              <div class="text-danger small" *ngIf="password.invalid && password.touched">
                <div *ngIf="password.errors?.['required']">Senha é obrigatória</div>
                <div *ngIf="password.errors?.['minlength']">Mínimo 6 caracteres</div>
              </div>
            </mdb-form-control>

            <mdb-form-control class="mb-4">
              <input
                mdbInput
                type="password"
                id="confirmarSenha"
                class="form-control"
                [(ngModel)]="registerData.confirmPassword"
                name="confirmPassword"
                required
                placeholder="Confirme sua senha"
                #confirmPassword="ngModel"
              />
              <label mdbLabel class="form-label" for="confirmarSenha">Confirmar Senha</label>
              <div class="text-danger small" *ngIf="confirmPassword.invalid && confirmPassword.touched">
                Confirmação de senha é obrigatória
              </div>
            </mdb-form-control>

            <div class="mb-3">
              <label for="role" class="form-label">Perfil</label>
              <select
                class="form-select"
                id="role"
                [(ngModel)]="registerData.role"
                name="role"
                required
                #role="ngModel"
              >
                <option value="USER">Usuário</option>
                <option value="ADMIN">Administrador</option>
              </select>
            </div>

            <div class="alert alert-danger" *ngIf="passwordMismatch">
              As senhas não coincidem.
            </div>

            <button
              type="submit"
              class="btn btn-primary btn-rounded w-100 mb-3"
              mdbRipple
              [disabled]="registerForm.invalid || passwordMismatch"
            >
              <i class="fas fa-user-plus me-2"></i>
              {{ registerForm.invalid ? 'Preencha todos os campos' : 'Registrar' }}
            </button>

          </form>

          <div class="text-center">
            <a href="#" class="text-decoration-none" (click)="goBack()">Voltar ao login</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
